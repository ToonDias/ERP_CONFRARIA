{% extends 'base.html' %}

{% block 'title' %}
    Unidade | Cadastro
{% endblock %}

{% block 'content-main' %}
<div class="container mt-5">
  <!-- Card Externo com borda suave e sombra -->
  <div class="card shadow-lg border-light rounded-3">
    <div class="card-header text-center bg-success text-white">
      <h3>Cadastrar Produto</h3>
    </div>
    <div class="card-body">
      <form method="POST" novalidate>
        {% csrf_token %}
        <!-- Sessão Produto -->
        <div class="section-box mb-4 p-4 rounded-2 border border-secondary shadow-sm">
          <h4 class="mb-3 text-success">Informações do Produto</h4>
          <div class="row">
            <div class="col-md-12">

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.codigo.id_for_label }}" class="form-label"><strong>Código</strong></label>
                  <input type="text" name="codigo" class="form-control shadow-sm {% if form.codigo.errors %}is-invalid{% endif %}" id="{{ form.codigo.id_for_label }}" value="{{ form.codigo.value|default:'' }}" required>
                  {% if form.codigo.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.codigo.errors %}
                        <p>{{ error }}</p>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.descricao.id_for_label }}" class="form-label"><strong>Descrição</strong></label>
                  <input type="text" name="descricao" class="form-control shadow-sm {% if form.descricao.errors %}is-invalid{% endif %}" id="{{ form.descricao.id_for_label }}" value="{{ form.descricao.value|default:'' }}" required>
                  {% if form.descricao.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.descricao.errors %}
                        <p>{{ error }}</p>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.detalhes.id_for_label }}" class="form-label"><strong>Detalhes</strong></label>
                  <textarea rows="3" name="detalhes" class="form-control shadow-sm {% if form.detalhes.errors %}is-invalid{% endif %}" id="{{ form.detalhes.id_for_label }}" value="{{ form.detalhes.value|default:'' }}" required></textarea>
                  {% if form.detalhes.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.detalhes.errors %}
                        <p>{{ error }}</p>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.categoria.id_for_label }}" class="form-label"><strong>Categoria</strong></label>
                  <select name="categoria" class="form-select shadow-sm {% if form.categoria.errors %}is-invalid{% endif %}" id="{{ form.categoria.id_for_label }}" required>
                      {% for value, label in form.categoria.field.choices %}
                          <option value="{{ value }}" {% if form.categoria.value == value %} selected {% endif %}>
                              {{ label }}
                          </option>
                      {% endfor %}
                  </select>
                  {% if form.categoria.errors %}
                      <div class="invalid-feedback">
                          {% for error in form.categoria.errors %}
                              <p>{{ error }}</p>
                          {% endfor %}
                      </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.fabricante.id_for_label }}" class="form-label"><strong>Fabricante</strong></label>
                  <select name="fabricante" class="form-select shadow-sm {% if form.fabricante.errors %}is-invalid{% endif %}" id="{{ form.fabricante.id_for_label }}" required>
                      {% for value, label in form.fabricante.field.choices %}
                          <option value="{{ value }}" {% if form.fabricante.value == value %} selected {% endif %}>
                              {{ label }}
                          </option>
                      {% endfor %}
                  </select>
                  {% if form.fabricante.errors %}
                      <div class="invalid-feedback">
                          {% for error in form.fabricante.errors %}
                              <p>{{ error }}</p>
                          {% endfor %}
                      </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.unidade.id_for_label }}" class="form-label"><strong>Unidade</strong></label>
                  <select name="unidade" class="form-select shadow-sm {% if form.unidade.errors %}is-invalid{% endif %}" id="{{ form.unidade.id_for_label }}" required>
                      {% for value, label in form.unidade.field.choices %}
                          <option value="{{ value }}" {% if form.unidade.value == value %} selected {% endif %}>
                              {{ label }}
                          </option>
                      {% endfor %}
                  </select>
                  {% if form.unidade.errors %}
                      <div class="invalid-feedback">
                          {% for error in form.unidade.errors %}
                              <p>{{ error }}</p>
                          {% endfor %}
                      </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="mb-3">
                  <label for="{{ form.imagem.id_for_label }}" class="form-label"><strong>Imagem</strong></label>
                  <input type="file" name="imagem" class="form-control shadow-sm {% if form.imagem.errors %}is-invalid{% endif %}" id="{{ form.imagem.id_for_label }}" value="{{ form.imagem.value|default:'' }}" required>
                  {% if form.imagem.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.imagem.errors %}
                        <p>{{ error }}</p>
                      {% endfor %}
                    </div>
                  {% endif %}
                  <div class="valid-feedback">Looks good!</div>
                </div>
              </div>

            </div>
           </div>
        </div>
        <!-- Botões de Ação -->
        <div class="d-flex justify-content-between mt-4">
          <button type="submit" class="btn btn-success shadow-sm px-4 py-2">Salvar</button>
          <a href="{% url 'listar_produtos' %}" class="btn btn-secondary shadow-sm px-4 py-2">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
  <!-- Fim do Card Externo -->
</div>
{% endblock %}
